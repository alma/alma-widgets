function t(t){return t&&"object"==typeof t&&"default"in t?t.default:t}var e=require("@alma/client"),n=require("preact/jsx-runtime"),r=t(require("lodash.isplainobject")),a=require("preact"),o=t(require("classnames")),i=require("preact/hooks"),c=Math.ceil,s=Math.floor,l=function(t){return isNaN(t=+t)?0:(t>0?s:c)(t)},u=function(t){if(null==t)throw TypeError("Can't call method on "+t);return t},f=function(t){return function(e,n){var r,a,o=String(u(e)),i=l(n),c=o.length;return i<0||i>=c?t?"":void 0:(r=o.charCodeAt(i))<55296||r>56319||i+1===c||(a=o.charCodeAt(i+1))<56320||a>57343?t?o.charAt(i):r:t?o.slice(i,i+2):a-56320+(r-55296<<10)+65536}},p={codeAt:f(!1),charAt:f(!0)},h="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function d(t,e,n){return t(n={path:e,exports:{},require:function(t,e){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}()}},n.exports),n.exports}var m=function(t){return t&&t.Math==Math&&t},w=m("object"==typeof globalThis&&globalThis)||m("object"==typeof window&&window)||m("object"==typeof self&&self)||m("object"==typeof h&&h)||function(){return this}()||Function("return this")(),g=function(t){try{return!!t()}catch(t){return!0}},v=!g(function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}),y=function(t){return"object"==typeof t?null!==t:"function"==typeof t},b=w.document,x=y(b)&&y(b.createElement),j=function(t){return x?b.createElement(t):{}},C=!v&&!g(function(){return 7!=Object.defineProperty(j("div"),"a",{get:function(){return 7}}).a}),N=function(t){if(!y(t))throw TypeError(String(t)+" is not an object");return t},O=function(t,e){if(!y(t))return t;var n,r;if(e&&"function"==typeof(n=t.toString)&&!y(r=n.call(t)))return r;if("function"==typeof(n=t.valueOf)&&!y(r=n.call(t)))return r;if(!e&&"function"==typeof(n=t.toString)&&!y(r=n.call(t)))return r;throw TypeError("Can't convert object to primitive value")},P=Object.defineProperty,S={f:v?P:function(t,e,n){if(N(t),e=O(e,!0),N(n),C)try{return P(t,e,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported");return"value"in n&&(t[e]=n.value),t}},_=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}},A=v?function(t,e,n){return S.f(t,e,_(1,n))}:function(t,e,n){return t[e]=n,t},k=function(t,e){try{A(w,t,e)}catch(n){w[t]=e}return e},E=w["__core-js_shared__"]||k("__core-js_shared__",{}),L=Function.toString;"function"!=typeof E.inspectSource&&(E.inspectSource=function(t){return L.call(t)});var M,T,I,D=E.inspectSource,V=w.WeakMap,z="function"==typeof V&&/native code/.test(D(V)),F={}.hasOwnProperty,H=function(t,e){return F.call(t,e)},R=d(function(t){(t.exports=function(t,e){return E[t]||(E[t]=void 0!==e?e:{})})("versions",[]).push({version:"3.8.1",mode:"global",copyright:"Â© 2020 Denis Pushkarev (zloirock.ru)"})}),q=0,U=Math.random(),B=function(t){return"Symbol("+String(void 0===t?"":t)+")_"+(++q+U).toString(36)},W=R("keys"),G=function(t){return W[t]||(W[t]=B(t))},Z={};if(z){var Y=E.state||(E.state=new(0,w.WeakMap)),J=Y.get,$=Y.has,K=Y.set;M=function(t,e){return e.facade=t,K.call(Y,t,e),e},T=function(t){return J.call(Y,t)||{}},I=function(t){return $.call(Y,t)}}else{var X=G("state");Z[X]=!0,M=function(t,e){return e.facade=t,A(t,X,e),e},T=function(t){return H(t,X)?t[X]:{}},I=function(t){return H(t,X)}}var Q,tt,et,nt={set:M,get:T,has:I,enforce:function(t){return I(t)?T(t):M(t,{})},getterFor:function(t){return function(e){var n;if(!y(e)||(n=T(e)).type!==t)throw TypeError("Incompatible receiver, "+t+" required");return n}}},rt={}.propertyIsEnumerable,at=Object.getOwnPropertyDescriptor,ot={f:at&&!rt.call({1:2},1)?function(t){var e=at(this,t);return!!e&&e.enumerable}:rt},it={}.toString,ct=function(t){return it.call(t).slice(8,-1)},st="".split,lt=g(function(){return!Object("z").propertyIsEnumerable(0)})?function(t){return"String"==ct(t)?st.call(t,""):Object(t)}:Object,ut=function(t){return lt(u(t))},ft=Object.getOwnPropertyDescriptor,pt={f:v?ft:function(t,e){if(t=ut(t),e=O(e,!0),C)try{return ft(t,e)}catch(t){}if(H(t,e))return _(!ot.f.call(t,e),t[e])}},ht=d(function(t){var e=nt.get,n=nt.enforce,r=String(String).split("String");(t.exports=function(t,e,a,o){var i,c=!!o&&!!o.unsafe,s=!!o&&!!o.enumerable,l=!!o&&!!o.noTargetGet;"function"==typeof a&&("string"!=typeof e||H(a,"name")||A(a,"name",e),(i=n(a)).source||(i.source=r.join("string"==typeof e?e:""))),t!==w?(c?!l&&t[e]&&(s=!0):delete t[e],s?t[e]=a:A(t,e,a)):s?t[e]=a:k(e,a)})(Function.prototype,"toString",function(){return"function"==typeof this&&e(this).source||D(this)})}),dt=w,mt=function(t){return"function"==typeof t?t:void 0},wt=function(t,e){return arguments.length<2?mt(dt[t])||mt(w[t]):dt[t]&&dt[t][e]||w[t]&&w[t][e]},gt=Math.min,vt=function(t){return t>0?gt(l(t),9007199254740991):0},yt=Math.max,bt=Math.min,xt=function(t){return function(e,n,r){var a,o=ut(e),i=vt(o.length),c=function(t,e){var n=l(t);return n<0?yt(n+e,0):bt(n,e)}(r,i);if(t&&n!=n){for(;i>c;)if((a=o[c++])!=a)return!0}else for(;i>c;c++)if((t||c in o)&&o[c]===n)return t||c||0;return!t&&-1}},jt=(xt(!0),xt(!1)),Ct=function(t,e){var n,r=ut(t),a=0,o=[];for(n in r)!H(Z,n)&&H(r,n)&&o.push(n);for(;e.length>a;)H(r,n=e[a++])&&(~jt(o,n)||o.push(n));return o},Nt=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],Ot=Nt.concat("length","prototype"),Pt={f:Object.getOwnPropertyNames||function(t){return Ct(t,Ot)}},St={f:Object.getOwnPropertySymbols},_t=wt("Reflect","ownKeys")||function(t){var e=Pt.f(N(t)),n=St.f;return n?e.concat(n(t)):e},At=function(t,e){for(var n=_t(e),r=S.f,a=pt.f,o=0;o<n.length;o++){var i=n[o];H(t,i)||r(t,i,a(e,i))}},kt=/#|\.prototype\./,Et=function(t,e){var n=Mt[Lt(t)];return n==It||n!=Tt&&("function"==typeof e?g(e):!!e)},Lt=Et.normalize=function(t){return String(t).replace(kt,".").toLowerCase()},Mt=Et.data={},Tt=Et.NATIVE="N",It=Et.POLYFILL="P",Dt=Et,Vt=pt.f,zt=function(t,e){var n,r,a,o,i,c=t.target,s=t.global,l=t.stat;if(n=s?w:l?w[c]||k(c,{}):(w[c]||{}).prototype)for(r in e){if(o=e[r],a=t.noTargetGet?(i=Vt(n,r))&&i.value:n[r],!Dt(s?r:c+(l?".":"#")+r,t.forced)&&void 0!==a){if(typeof o==typeof a)continue;At(o,a)}(t.sham||a&&a.sham)&&A(o,"sham",!0),ht(n,r,o,t)}},Ft=function(t){return Object(u(t))},Ht=!g(function(){function t(){}return t.prototype.constructor=null,Object.getPrototypeOf(new t)!==t.prototype}),Rt=G("IE_PROTO"),qt=Object.prototype,Ut=Ht?Object.getPrototypeOf:function(t){return t=Ft(t),H(t,Rt)?t[Rt]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?qt:null},Bt=!!Object.getOwnPropertySymbols&&!g(function(){return!String(Symbol())}),Wt=Bt&&!Symbol.sham&&"symbol"==typeof Symbol.iterator,Gt=R("wks"),Zt=w.Symbol,Yt=Wt?Zt:Zt&&Zt.withoutSetter||B,Jt=function(t){return H(Gt,t)||(Gt[t]=Bt&&H(Zt,t)?Zt[t]:Yt("Symbol."+t)),Gt[t]},$t=Jt("iterator"),Kt=!1;[].keys&&("next"in(et=[].keys())?(tt=Ut(Ut(et)))!==Object.prototype&&(Q=tt):Kt=!0),null==Q&&(Q={}),H(Q,$t)||A(Q,$t,function(){return this});var Xt,Qt={IteratorPrototype:Q,BUGGY_SAFARI_ITERATORS:Kt},te=Object.keys||function(t){return Ct(t,Nt)},ee=v?Object.defineProperties:function(t,e){N(t);for(var n,r=te(e),a=r.length,o=0;a>o;)S.f(t,n=r[o++],e[n]);return t},ne=wt("document","documentElement"),re=G("IE_PROTO"),ae=function(){},oe=function(t){return"<script>"+t+"<\/script>"},ie=function(){try{Xt=document.domain&&new ActiveXObject("htmlfile")}catch(t){}var t,e;ie=Xt?function(t){t.write(oe("")),t.close();var e=t.parentWindow.Object;return t=null,e}(Xt):((e=j("iframe")).style.display="none",ne.appendChild(e),e.src=String("javascript:"),(t=e.contentWindow.document).open(),t.write(oe("document.F=Object")),t.close(),t.F);for(var n=Nt.length;n--;)delete ie.prototype[Nt[n]];return ie()};Z[re]=!0;var ce=Object.create||function(t,e){var n;return null!==t?(ae.prototype=N(t),n=new ae,ae.prototype=null,n[re]=t):n=ie(),void 0===e?n:ee(n,e)},se=S.f,le=Jt("toStringTag"),ue=function(t,e,n){t&&!H(t=n?t:t.prototype,le)&&se(t,le,{configurable:!0,value:e})},fe={},pe=Qt.IteratorPrototype,he=function(){return this},de=Object.setPrototypeOf||("__proto__"in{}?function(){var t,e=!1,n={};try{(t=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(n,[]),e=n instanceof Array}catch(t){}return function(n,r){return N(n),function(t){if(!y(t)&&null!==t)throw TypeError("Can't set "+String(t)+" as a prototype")}(r),e?t.call(n,r):n.__proto__=r,n}}():void 0),me=Qt.IteratorPrototype,we=Qt.BUGGY_SAFARI_ITERATORS,ge=Jt("iterator"),ve=function(){return this},ye=p.charAt,be=nt.set,xe=nt.getterFor("String Iterator");!function(t,e,n,r,a,o,i){!function(t,e,n){t.prototype=ce(pe,{next:_(1,function(){var t,e=xe(this),n=e.string,r=e.index;return r>=n.length?{value:void 0,done:!0}:(t=ye(n,r),e.index+=t.length,{value:t,done:!1})})}),ue(t,"String Iterator",!1),fe["String Iterator"]=he}(n);var c,s,l,u=function(t){if(void 0===t&&h)return h;if(!we&&t in f)return f[t];switch(t){case"keys":case"values":case"entries":return function(){return new n(this,t)}}return function(){return new n(this)}},f=t.prototype,p=f[ge]||f["@@iterator"]||void 0,h=!we&&p||u(void 0);if(p&&(c=Ut(p.call(new t)),me!==Object.prototype&&c.next&&(Ut(c)!==me&&(de?de(c,me):"function"!=typeof c[ge]&&A(c,ge,ve)),ue(c,"String Iterator",!0))),f[ge]!==h&&A(f,ge,h),void(fe.String=h))if(void(s={values:u("values"),keys:u("keys"),entries:u("entries")}))for(l in s)(we||!(l in f))&&ht(f,l,s[l]);else zt({target:"String",proto:!0,forced:we||!1},s)}(String,0,function(t){be(this,{type:"String Iterator",string:String(t),index:0})});var je=function(t,e,n){if(function(t){if("function"!=typeof t)throw TypeError(String(t)+" is not a function")}(t),void 0===e)return t;switch(n){case 0:return function(){return t.call(e)};case 1:return function(n){return t.call(e,n)};case 2:return function(n,r){return t.call(e,n,r)};case 3:return function(n,r,a){return t.call(e,n,r,a)}}return function(){return t.apply(e,arguments)}},Ce=function(t,e,n,r){try{return r?e(N(n)[0],n[1]):e(n)}catch(e){throw function(t){var e=t.return;void 0!==e&&N(e.call(t))}(t),e}},Ne=Jt("iterator"),Oe=Array.prototype,Pe=function(t){return void 0!==t&&(fe.Array===t||Oe[Ne]===t)},Se=function(t,e,n){var r=O(e);r in t?S.f(t,r,_(0,n)):t[r]=n},_e={};_e[Jt("toStringTag")]="z";var Ae="[object z]"===String(_e),ke=Jt("toStringTag"),Ee="Arguments"==ct(function(){return arguments}()),Le=Ae?ct:function(t){var e,n,r;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=function(t,e){try{return t[e]}catch(t){}}(e=Object(t),ke))?n:Ee?ct(e):"Object"==(r=ct(e))&&"function"==typeof e.callee?"Arguments":r},Me=Jt("iterator"),Te=function(t){if(null!=t)return t[Me]||t["@@iterator"]||fe[Le(t)]},Ie=Jt("iterator"),De=!1;try{var Ve=0,ze={next:function(){return{done:!!Ve++}},return:function(){De=!0}};ze[Ie]=function(){return this},Array.from(ze,function(){throw 2})}catch(t){}var Fe,He=!function(t,e){if(!De)return!1;var n=!1;try{var r={};r[Ie]=function(){return{next:function(){return{done:n=!0}}}},Array.from(r)}catch(t){}return n}();function Re(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function qe(t,e,n){return e&&Re(t.prototype,e),n&&Re(t,n),t}function Ue(){return(Ue=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t}).apply(this,arguments)}function Be(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}function We(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Ge(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return We(t,void 0);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?We(t,void 0):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0;return function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(n=t[Symbol.iterator]()).next.bind(n)}zt({target:"Array",stat:!0,forced:He},{from:function(t){var e,n,r,a,o,i,c=Ft(t),s="function"==typeof this?this:Array,l=arguments.length,u=l>1?arguments[1]:void 0,f=void 0!==u,p=Te(c),h=0;if(f&&(u=je(u,l>2?arguments[2]:void 0,2)),null==p||s==Array&&Pe(p))for(n=new s(e=vt(c.length));e>h;h++)i=f?u(c[h],h):c[h],Se(n,h,i);else for(o=(a=p.call(c)).next,n=new s;!(r=o.call(a)).done;h++)i=f?Ce(a,u,[r.value,h],!0):r.value,Se(n,h,i);return n.length=h,n}}),"function"!=typeof(Fe=window.Element.prototype).matches&&(Fe.matches=Fe.msMatchesSelector||Fe.mozMatchesSelector||Fe.webkitMatchesSelector||function(t){for(var e=(this.document||this.ownerDocument).querySelectorAll(t),n=0;e[n]&&e[n]!==this;)++n;return Boolean(e[n])}),"function"!=typeof Fe.closest&&(Fe.closest=function(t){for(var e=this;e&&1===e.nodeType;){if(e.matches(t))return e;e=e.parentNode}return null}),"".trim||(String.prototype.trim=function(){return this.replace(/^[\sï»¿]+|[\sï»¿]+$/g,"")}),function(t){t.DOMException||((DOMException=function(t){this.message=t}).prototype=new Error);var e,n,r=/[\11\12\14\15\40]/,a=0,o=function(t,e){if(""===e)throw new DOMException("Failed to execute '"+t+"' on 'DOMTokenList': The token provided must not be empty.");if(-1!==(a=e.search(r)))throw new DOMException("Failed to execute '"+t+"' on 'DOMTokenList': The token provided ('"+e[a]+"') contains HTML space characters, which are not valid in tokens.")};"function"!=typeof DOMTokenList&&function(t){var e=t.document,n=t.Object,a=n.prototype.hasOwnProperty,i=n.defineProperty,c=0,s=0,l=function(){if(!c)throw TypeError("Illegal constructor")};function u(){var e=t.event,n=e.propertyName;if(!s&&("className"===n||"classList"===n&&!i)){var a=e.srcElement,o=a[" uCLp"],c=""+a[n],l=c.trim().split(r),u=a["classList"===n?" uCL":"classList"],f=o.length;t:for(var p=0,h=o.length=l.length,d=0;p!==h;++p){for(var m=0;m!==p;++m)if(l[m]===l[p]){d++;continue t}u[p-d]=l[p]}for(var w=h-d;w<f;++w)delete u[w];if("classList"!==n)return;s=1,a.classList=u,a.className=c,s=0,u.length=l.length-d}}function f(t){if(!t||!("innerHTML"in t))throw TypeError("Illegal invocation");t.detachEvent("onpropertychange",u),c=1;try{var e=function(){};e.prototype=new l}finally{c=0}var n=e.prototype,a=new e;t:for(var o=t.className.trim().split(r),f=0,p=o.length,h=0;f!==p;++f){for(var d=0;d!==f;++d)if(o[d]===o[f]){h++;continue t}this[f-h]=o[f]}n.length=p-h,n.value=t.className,n[" uCL"]=t,i?(i(t,"classList",{enumerable:1,get:function(){return a},configurable:0,set:function(e){s=1,t.className=n.value=e+="",s=0;var o=e.trim().split(r),i=n.length;t:for(var c=0,l=n.length=o.length,u=0;c!==l;++c){for(var f=0;f!==c;++f)if(o[f]===o[c]){u++;continue t}a[c-u]=o[c]}for(var p=l-u;p<i;++p)delete a[p]}}),i(t," uCLp",{enumerable:0,configurable:0,writeable:0,value:e.prototype}),i(n," uCL",{enumerable:0,configurable:0,writeable:0,value:t})):(t.classList=a,t[" uCL"]=a,t[" uCLp"]=e.prototype),t.attachEvent("onpropertychange",u)}l.prototype.toString=l.prototype.toLocaleString=function(){return this.value},l.prototype.add=function(){t:for(var t=0,e=arguments.length,n="",r=this[" uCL"],a=r[" uCLp"];t!==e;++t){o("add",n=arguments[t]+"");for(var i=0,c=a.length,l=n;i!==c;++i){if(this[i]===n)continue t;l+=" "+this[i]}this[c]=n,a.length+=1,a.value=l}s=1,r.className=a.value,s=0},l.prototype.remove=function(){for(var t=0,e=arguments.length,n="",r=this[" uCL"],a=r[" uCLp"];t!==e;++t){o("remove",n=arguments[t]+"");for(var i=0,c=a.length,l="",u=0;i!==c;++i)u?this[i-1]=this[i]:this[i]!==n?l+=this[i]+" ":u=1;u&&(delete this[c],a.length-=1,a.value=l)}s=1,r.className=a.value,s=0},t.DOMTokenList=l;try{t.Object.defineProperty(t.Element.prototype,"classList",{enumerable:1,get:function(t){return a.call(this,"classList")||f(this),this.classList},configurable:0,set:function(t){this.className=t}})}catch(n){t[" uCL"]=f,e.documentElement.firstChild.appendChild(e.createElement("style")).styleSheet.cssText='_*{x-uCLp:expression(!this.hasOwnProperty("classList")&&window[" uCL"](this))}[class]{x-uCLp/**/:expression(!this.hasOwnProperty("classList")&&window[" uCL"](this))}'}}(t),e=t.DOMTokenList.prototype,n=t.document.createElement("div").classList,e.item||(e.item=function(t){return void 0===(e=this[t])?null:e;var e}),e.toggle&&!1===n.toggle("a",0)||(e.toggle=function(t){if(arguments.length>1)return this[arguments[1]?"add":"remove"](t),!!arguments[1];var e=this.value;return this.remove(e),e===this.value&&(this.add(t),!0)}),e.replace&&"boolean"==typeof n.replace("a","b")||(e.replace=function(t,e){o("replace",t),o("replace",e);var n=this.value;return this.remove(t),this.value!==n&&(this.add(e),!0)}),e.contains||(e.contains=function(t){for(var e=0,n=this.length;e!==n;++e)if(this[e]===t)return!0;return!1}),e.forEach||(e.forEach=function(t){if(1===arguments.length)for(var e=0,n=this.length;e!==n;++e)t(this[e],e,this);else{e=0,n=this.length;for(var r=arguments[1];e!==n;++e)t.call(r,this[e],e,this)}}),e.entries||(e.entries=function(){var t=this;return{next:function(){return 0<t.length?{value:[0,t[0]],done:!1}:{done:!0}}}}),e.values||(e.values=function(){var t=this;return{next:function(){return 0<t.length?{value:t[0],done:!1}:{done:!0}}}}),e.keys||(e.keys=function(){var t=this;return{next:function(){return 0<t.length?{value:0,done:!1}:{done:!0}}}})}(window);var Ze=function(){function t(t){this.almaClient=t,this.widgets=[]}var e=t.prototype;return e.add=function(t,e){var n=new t(this.almaClient,e);return this.widgets.push(n),n},e.render=function(){try{for(var t,e=[],n=Ge(this.widgets);!(t=n()).done;)e.push(t.value.render());return Promise.resolve(Promise.all(e)).then(function(){})}catch(t){return Promise.reject(t)}},t}(),Ye=function(){function t(t,e){this.almaClient=t,this.config=function(t,e){var n={},a=[t,e];function o(t,e){for(var n=0,a=Object.keys(e);n<a.length;n++){var i=a[n];Object.prototype.hasOwnProperty.call(e,i)&&(r(e[i])?(t[i]&&r(t[i])||(t[i]={}),o(t[i],e[i])):t[i]=e[i])}return t}for(var i=0;i<2;i++)o(n,a[i]);return n}(this.defaultConfig(),e)}return t.prototype.render=function(){try{var t=this;return Promise.resolve(t.renderComponent()).then(function(e){a.render(n.jsx("div",{className:"alma-widget-root "+t.config.classes.root,children:e}),t.container)})}catch(t){return Promise.reject(t)}},qe(t,[{key:"container",get:function(){var t;if("string"==typeof this.config.container){var e=document.querySelector(this.config.container);if(!e)throw new Error("Container element '"+this.config.container+"' not found");t=e}else t=this.config.container;return t}}]),t}(),Je=function(t){var e=t.closeCallback,r=t.children;return i.useEffect(function(){var t=function(t){var n;"escape"!==(null==(n=t.key)?void 0:n.toLowerCase())&&27!==t.keyCode||null==e||e()};return document.addEventListener("keyup",t),function(){document.removeEventListener("keyup",t)}},[e]),n.jsx("div",{className:"atw-inset-0 atw-flex atw-fixed atw-justify-center atw-items-center atw-z-50 atw-bg-black atw-bg-opacity-50",children:r})};function $e(t){return null==t.find(function(t){return t.customer_fee>0||t.customer_interest>0})}function Ke(t){var e=t.plan;return e?n.jsxs("p",{className:"atw-my-8 atw-text-lg",children:["Paiement ",$e(e)?"sans frais,":null," par carte bancaire, en ",e.length," ","Ã©chÃ©ancesÂ :"]}):n.jsxs("div",{className:"atw-my-8 atw-space-y-2 atw-animate-pulse",children:[n.jsx("div",{className:"atw-h-4 atw-bg-orange-900 atw-rounded-sm atw-opacity-15",children:"Â "}),n.jsx("div",{className:"atw-h-4 atw-bg-orange-900 atw-rounded-sm atw-opacity-15",children:"Â "})]})}function Xe(t){var e=t.color;return n.jsx("svg",{className:t.className,width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:n.jsx("path",{d:"M12.5964 11.404L9.41445 8.22205L12.5964 5.04007C12.7732 4.86329 12.7732 4.50974 12.5964 4.33296L11.8893 3.62585C11.6904 3.42698 11.359 3.44908 11.1822 3.62585L8.00023 6.80783L4.81825 3.62585C4.61938 3.42698 4.28792 3.44908 4.11114 3.62585L3.40404 4.33296C3.20516 4.53183 3.20516 4.84119 3.40404 5.04007L6.58602 8.22205L3.40404 11.404C3.20516 11.6029 3.20517 11.9123 3.40404 12.1111L4.11115 12.8182C4.28792 12.995 4.61938 13.0171 4.81825 12.8182L8.00023 9.63626L11.1822 12.8182C11.359 12.995 11.6904 13.0171 11.8893 12.8182L12.5964 12.1111C12.7732 11.9344 12.7732 11.5808 12.5964 11.404Z",fill:void 0===e?"#fff":e})})}var Qe=["atw-group","atw-inline-block","atw-transition-all","duration-200","atw-border-b-2","atw-text-sm","atw-mr-3"],tn=["atw-flex","atw-p-2","atw-text-white","atw-rounded-sm","atw-my-4","atw-transition-colors","atw-duration-200"," atw-select-none"];function en(){var t=o.apply(void 0,Qe.concat([".atw-animate-pulse","atw-border-orange-900","atw-opacity-50","atw-text-orange-900"])),e=o.apply(void 0,tn.concat(["atw-bg-orange-900"]));return n.jsx("li",{className:t,children:n.jsx("span",{className:e,children:n.jsx(Xe,{})})})}function nn(t){var e=t.n,r=t.selected,a=t.onSelect,i=o.apply(void 0,Qe.concat([r?"atw-border-red":"atw-border-transparent","atw-cursor-pointer"])),c=o.apply(void 0,tn.concat([r?"atw-bg-red":"atw-bg-blue",{"group-hover:atw-bg-red":!r}]));return n.jsx("li",{className:i,onClick:function(t){t.preventDefault(),t.stopPropagation(),a(e)},children:n.jsxs("span",{className:c,children:[e,n.jsx(Xe,{className:"plan-selector-multiplier"})]})})}function rn(t){var e,r=t.selectedPlan,a=t.installmentsCounts,o=t.onSelect;return e=0===a.length?n.jsx(en,{}):a.map(function(t){return n.jsx(nn,{selected:t===r,n:t,onSelect:o},t)}),n.jsx("ul",{className:"atw-flex atw-justify-center",children:e})}function an(t){return Number((t/100).toFixed(2))}function on(t){return String(an(t)).replace(".",",")}function cn(t,e){return t.getUTCDate()===e.getUTCDate()&&t.getUTCMonth()===e.getUTCMonth()&&t.getUTCFullYear()===e.getUTCFullYear()}function sn(t,e,n){return void 0===e&&(e=!1),void 0===n&&(n=!1),function(t){return cn(t,new Date)}(t)&&!n?"aujourd'hui":function(t){var e=new Date;return cn(t,new Date(e.setDate(e.getDate()-1)))}(t)&&!n?"hier":(e?"le ":"")+t.toLocaleDateString()}function ln(t,e){var n=t.getDate();return t.setMonth(t.getMonth()+ +e),t.getDate()!=n&&t.setDate(0),t}function un(t){var e=t.currency,r=void 0===e?"â¬":e;return n.jsxs("span",{className:t.className,children:[on(t.cents),"â¯",r]})}function fn(t){var e=t.installment,r=e.purchase_amount+e.customer_fee+e.customer_interest,a=o("atw-flex","atw-flex-row","atw-justify-between",{"atw-pb-4":0===e.customer_fee}),i=null;return e.customer_fee>0&&(i=n.jsx("div",{className:"atw-flex atw-flex-row atw-justify-end atw-pb-4",children:n.jsxs("span",{className:"atw-text-xs",children:["Dont frais : ",n.jsx(un,{cents:e.customer_fee})]})})),n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:a,children:[n.jsx("span",{className:"atw-capitalize",children:sn(new Date(1e3*e.due_date),!0)}),n.jsx(un,{className:"alma-title-text",cents:r})]}),i]})}function pn(t){return n.jsxs("div",{className:"atw-flex atw-flex-row atw-justify-between",children:[n.jsx("span",{className:"atw-capitalize",children:t.label}),n.jsxs("span",{children:[n.jsx("span",{className:"atw-inline-block atw-w-8 atw-bg-orange-900 atw-rounded-sm atw-opacity-25",children:"Â "}),"Â â¬"]})]})}function hn(t){return t.map(function(t){return t.purchase_amount+t.customer_fee+t.customer_interest}).reduce(function(t,e){return t+e})}function dn(t){var e=t.plan;if(!e){var r=new Date;return n.jsxs("div",{className:"atw-space-y-4 atw-animate-pulse atw-text-orange-900 atw-opacity-25",children:[n.jsx(pn,{label:sn(r,!0)}),n.jsx(pn,{label:sn(ln(r,1),!0)}),n.jsx(pn,{label:sn(ln(r,2),!0)}),n.jsx("hr",{className:"atw-border-orange-900 atw-opacity-25"}),n.jsx(pn,{label:"Total"})]})}return n.jsxs("div",{children:[e.map(function(t,e){return n.jsx(fn,{installment:t},e)}),n.jsx("hr",{className:"atw-border-blue atw-opacity-50"}),n.jsxs("div",{className:"atw-flex atw-flex-row atw-justify-between atw-pt-4 alma-title-text",children:[n.jsx("span",{children:"Total"}),n.jsx(un,{cents:hn(e)})]})]})}const mn="data:image/svg+xml,%3csvg width='114' height='62' viewBox='0 0 114 62' fill='none' xmlns='http://www.w3.org/2000/svg'%3e%3cg clip-path='url(%23clip0)'%3e%3cpath d='M18.1985 26.5444V26.2495H14.0374C12.0793 26.2495 10.627 26.4461 9.68054 26.8394C8.76673 27.1998 8.30982 28.0027 8.30982 29.248C8.30982 31.116 9.61526 32.0499 12.2261 32.0499C14.4128 32.0499 15.9467 31.5911 16.8278 30.6736C17.7416 29.7232 18.1985 28.3468 18.1985 26.5444ZM10.6107 37.4571C7.54288 37.4571 5.27467 36.7034 3.80605 35.1959C2.33743 33.6557 1.60312 31.6731 1.60312 29.248C1.60312 26.3314 2.54956 24.2341 4.44245 22.956C6.33534 21.6452 9.22363 20.9898 13.1073 20.9898H18.1985V19.9083C18.1985 17.4833 16.6646 16.2708 13.5969 16.2708C10.8554 16.2708 9.33786 17.3194 9.04414 19.4168H2.19057C2.41902 16.8934 3.46337 14.7797 5.32363 13.0756C7.18388 11.3715 9.99058 10.5195 13.7437 10.5195C17.4642 10.5195 20.2709 11.3551 22.1638 13.0264C24.0567 14.6978 25.0032 17.0573 25.0032 20.1049V36.8673H18.8349V34.0162C17.3663 36.3102 14.6249 37.4571 10.6107 37.4571Z' fill='%2300425E'/%3e%3cpath d='M40.6279 30.8702V36.8181C39.9426 36.9164 39.2246 36.9656 38.4739 36.9656C35.7651 36.9656 33.8396 36.3921 32.6974 35.2451C31.5551 34.0654 30.984 32.181 30.984 29.5921V0H37.9354V29.1006C37.9354 29.7232 38.0497 30.182 38.2781 30.4769C38.5066 30.7719 38.9798 30.9193 39.6978 30.9193C39.861 30.9193 40.0405 30.9193 40.2363 30.9193C40.4647 30.8866 40.5953 30.8702 40.6279 30.8702Z' fill='%2300425E'/%3e%3cpath d='M68.0988 22.2187V36.8673H61.1473V21.5796C61.1473 18.2042 59.7766 16.5165 57.0352 16.5165C55.436 16.5165 54.1958 17.0081 53.3147 17.9912C52.4661 18.9744 52.0419 20.3343 52.0419 22.0712V36.8673H45.0904V11.1093H51.5034V14.2553C52.8414 11.7648 55.3055 10.5195 58.8954 10.5195C62.2896 10.5195 64.7699 11.732 66.3364 14.157C68.523 11.732 71.3624 10.5195 74.8544 10.5195C77.857 10.5195 80.1578 11.4534 81.757 13.3214C83.3561 15.1893 84.1557 17.6799 84.1557 20.7931V36.8673H77.2042V21.5796C77.2042 18.2042 75.8335 16.5165 73.0921 16.5165C71.4603 16.5165 70.2201 17.0245 69.3716 18.0404C68.523 19.0235 68.0988 20.4163 68.0988 22.2187Z' fill='%2300425E'/%3e%3cpath d='M105.541 26.5444V26.2495H101.38C99.4221 26.2495 97.9698 26.4461 97.0234 26.8394C96.1096 27.1998 95.6526 28.0027 95.6526 29.248C95.6526 31.116 96.9581 32.0499 99.569 32.0499C101.756 32.0499 103.289 31.5911 104.171 30.6736C105.084 29.7232 105.541 28.3468 105.541 26.5444ZM97.9535 37.4571C94.8857 37.4571 92.6175 36.7034 91.1489 35.1959C89.6803 33.6557 88.9459 31.6731 88.9459 29.248C88.9459 26.3314 89.8924 24.2341 91.7853 22.956C93.6782 21.6452 96.5665 20.9898 100.45 20.9898H105.541V19.9083C105.541 17.4833 104.007 16.2708 100.94 16.2708C98.1983 16.2708 96.6807 17.3194 96.387 19.4168H89.5334C89.7618 16.8934 90.8062 14.7797 92.6665 13.0756C94.5267 11.3715 97.3334 10.5195 101.087 10.5195C104.807 10.5195 107.614 11.3551 109.507 13.0264C111.4 14.6978 112.346 17.0573 112.346 20.1049V36.8673H106.178V34.0162C104.709 36.3102 101.968 37.4571 97.9535 37.4571Z' fill='%2300425E'/%3e%3crect y='53.7429' width='114' height='8.14286' fill='%23FF414D'/%3e%3c/g%3e%3cdefs%3e%3cclipPath id='clip0'%3e%3crect width='114' height='61.8857' fill='white'/%3e%3c/clipPath%3e%3c/defs%3e%3c/svg%3e";var wn={visa:"Visa",mastercard:"Mastercard",cb:"Cartes Bancaires"},gn={cb:"data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' width='24' height='16' viewBox='0 0 24 16'%3e%3cdefs%3e%3clinearGradient id='cardcb' x1='5.842%25' x2='95.393%25' y1='81.753%25' y2='17.344%25'%3e%3cstop offset='0%25' stop-color='%2339B54A'%3e%3c/stop%3e %3cstop offset='100%25' stop-color='%230A5296'%3e%3c/stop%3e%3c/linearGradient%3e%3c/defs%3e %3cg fill='none' fill-rule='nonzero'%3e%3cpath fill='url(%23cardcb)' d='M22.621 16H1.38C.627 16 0 15.392 0 14.662V1.338C0 .608.627 0 1.379 0H22.62C23.373 0 24 .608 24 1.338v13.324c-.063.73-.627 1.338-1.379 1.338z'%3e%3c/path%3e %3cg fill='white'%3e%3cpath d='M19.094 4.03h-6.437V8h6.498c1.165 0 2.084-.889 2.084-2.015-.06-1.066-.98-1.955-2.145-1.955zM19.094 8.593h-6.437v3.97h6.498c1.165 0 2.084-.889 2.084-2.015-.06-1.067-.98-1.955-2.145-1.955zM7.017 8.06h4.966c-.245-2.371-2.391-4.267-4.966-4.267-2.758 0-5.027 2.074-5.027 4.681s2.269 4.682 5.027 4.682c2.698 0 4.904-2.015 5.027-4.563H7.017v-.534z'%3e%3c/path%3e%3c/g%3e%3c/g%3e%3c/svg%3e",visa:"data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' width='24' height='16' viewBox='0 0 24 16'%3e%3cg fill='none' fill-rule='nonzero'%3e%3cpath fill='%23FCFCFC' d='M22.684 16H1.38C.627 16 0 15.39 0 14.656V1.344C0 .61.627 0 1.379 0H22.62C23.373 0 24 .61 24 1.344v13.374c0 .671-.564 1.282-1.316 1.282z'%3e%3c/path%3e %3cpath fill='%23005098' d='M8.889 10.726l.948-5.393h1.482l-.949 5.393zM15.704 5.452a3.658 3.658 0 0 0-1.304-.237c-1.481 0-2.489.71-2.489 1.778 0 .77.711 1.185 1.304 1.481.592.237.77.415.77.652 0 .355-.474.533-.889.533-.592 0-.889-.059-1.363-.296l-.177-.06-.178 1.186c.355.178 1.007.296 1.659.296 1.54 0 2.548-.71 2.548-1.837 0-.592-.415-1.067-1.244-1.481-.534-.237-.83-.415-.83-.652 0-.237.237-.474.83-.474.474 0 .83.118 1.126.178l.118.059.119-1.126M19.496 5.333H18.37c-.355 0-.592.119-.77.474l-2.193 4.919h1.541s.237-.652.296-.83h1.897c.059.178.178.83.178.83h1.362l-1.185-5.393zM17.66 8.77l.593-1.481s.118-.296.178-.533l.118.474s.296 1.303.356 1.54h-1.245zM7.644 5.333L6.222 9.007l-.178-.77C5.748 7.348 4.92 6.459 4.03 5.985l1.303 4.682h1.541l2.311-5.393h-1.54'%3e%3c/path%3e %3cpath fill='%23F6A500' d='M4.919 5.333h-2.37v.119c1.836.474 3.08 1.54 3.555 2.844L5.57 5.807c-.118-.414-.355-.474-.651-.474'%3e%3c/path%3e %3cpath fill='%230A5296' d='M23.937 3.23H0V1.316C0 .598.627 0 1.379 0H22.62C23.373 0 24 .598 24 1.316V3.23h-.063z'%3e%3c/path%3e %3cpath fill='%23F4A428' d='M.063 13H24v1.8c0 .655-.625 1.2-1.375 1.2H1.375C.625 16 0 15.455 0 14.8V13h.063z'%3e%3c/path%3e%3c/g%3e%3c/svg%3e",mastercard:"data:image/svg+xml,%3csvg width='24px' height='16px' viewBox='0 0 24 16' version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3cg id='Parcours-1C-B' stroke='none' stroke-width='1' fill='none' fill-rule='evenodd'%3e%3cg id='mobile-1C-Paiement-V1' transform='translate(-269.000000%2c -313.000000)'%3e%3cg id='mastercard' transform='translate(269.000000%2c 313.000000)'%3e%3crect id='Rectangle' fill='white' x='0' y='0' width='24' height='16' rx='1'%3e%3c/rect%3e %3cg id='Group-6' transform='translate(4.000000%2c 3.000000)'%3e%3ccircle id='Oval-4-Copy' fill='%23EA001B' cx='5.05263158' cy='5.05263158' r='5.05263158'%3e%3c/circle%3e %3ccircle id='Oval-4' fill-opacity='0.25' fill='%23F79F1A' cx='10.9473684' cy='5.05263158' r='5.05263158'%3e%3c/circle%3e %3ccircle id='Oval-4-Copy-2' fill-opacity='0.9' fill='%23F79F1A' cx='10.9473684' cy='5.05263158' r='5.05263158'%3e%3c/circle%3e %3ccircle id='Oval-4-Copy-3' fill-opacity='0.3' fill='%23EA001B' cx='5.05263158' cy='5.05263158' r='5.05263158'%3e%3c/circle%3e%3c/g%3e%3c/g%3e%3c/g%3e%3c/g%3e%3c/svg%3e"};function vn(t){var e=t.brand,r=t.alt;return n.jsx("img",{className:"atw-h-full",src:gn[e],alt:void 0===r?wn[e]:r})}function yn(t){var e=t.almaClient,r=t.purchaseAmount,a=t.installmentsCounts,o=t.samplePlans,c=void 0===o?[]:o,s=t.closeCallback,l=i.useState(0),u=l[0],f=l[1],p=i.useState(c),h=p[0],d=p[1];i.useEffect(function(){var t=h.map(function(t){return t.length}).reduce(function(t,e){return 3!==t&&e>t?e:t},0);f(t)},[h]),i.useEffect(function(){h.length||function(t,e,n){try{return Promise.resolve(t.payments.eligibility({payment:{purchase_amount:e,installments_count:n}})).then(function(t){return t.filter(function(t){return t.eligible}).map(function(t){return t.payment_plan})})}catch(t){return Promise.reject(t)}}(e,r,a).then(d).catch(function(){return null})},[r,a,h]);var m,w=(m=u,h.find(function(t){return t.length===m})||null);return n.jsx(Je,{closeCallback:s,children:n.jsxs("div",{className:"atw-overflow-auto atw-relative atw-flex atw-flex-row atw-flex-wrap atw-rounded-sm atw-shadow-lg atw-w-screen atw-h-screen md:atw-h-800 lg:atw-w-11/12 md:atw-max-w-4xl atw-max-h-screen atw-bg-white atw-text-base",children:[n.jsx("button",{onClick:s,className:"atw-text-3xl atw-opacity-50 hover:atw-opacity-100 focus:atw-opacity-100 atw-absolute atw-top-3 atw-right-4 atw-outline-none atw-transform hover:atw-scale-125 focus:atw-scale-125 atw-transition-transform atw-duration-100",children:"Ã"}),n.jsxs("div",{className:"atw-w-full md:atw-w-1/2 atw-p-8",children:[n.jsx("img",{className:"atw-h-8",src:mn,alt:"Alma"}),n.jsxs("div",{className:"alma-title-text atw-text-5xl atw-font-bold atw-mt-8",children:["Payer avec Alma c'est simple ",n.jsx("br",{}),"et ",n.jsx("span",{className:"alma-text-highlight-md",children:"immÃ©diat"})]}),n.jsxs("ul",{className:"alma-howItWorks__steps atw-my-10",children:[n.jsx("li",{className:"atw-pl-8 atw-mb-5",children:"Validez votre panier"}),n.jsx("li",{className:"atw-pl-8 atw-mb-5",children:"SÃ©lectionnez l'option de paiement en plusieurs fois Alma"}),n.jsx("li",{className:"atw-pl-8 atw-mb-5",children:"Entrez votre numÃ©ro de carte bancaire, et c'est tout !"})]}),n.jsx("p",{children:n.jsx("a",{href:"https://getalma.eu/customers",target:"_blank",className:"atw-text-xs atw-underline",children:"Une question ? Visitez notre page dÃ©diÃ©e"})}),n.jsxs("p",{className:"atw-mt-7 atw-space-x-3",children:[n.jsx("span",{className:"atw-inline-block atw-h-10 atw-border atw-border-orange atw-rounded-md atw-p-2",children:n.jsx(vn,{brand:"cb"})}),n.jsx("span",{className:"atw-inline-block atw-h-10 atw-border atw-border-orange atw-rounded-md atw-p-2",children:n.jsx(vn,{brand:"visa"})}),n.jsx("span",{className:"atw-inline-block atw-h-10 atw-border atw-border-orange atw-rounded-md atw-p-1",children:n.jsx(vn,{brand:"mastercard"})})]})]}),n.jsxs("div",{className:"alma-howItWorks__planPanel atw-w-full md:atw-w-1/2 atw-p-8 atw-pb-24 md:atw-pb-8 md:atw-pt-8 atw-flex atw-flex-col atw-align-center atw-bg-beige",children:[n.jsxs("div",{className:"atw-flex-grow",children:[n.jsx(rn,{installmentsCounts:h.map(function(t){return t.length}),selectedPlan:u,onSelect:f}),n.jsx(Ke,{plan:w}),n.jsx(dn,{plan:w})]}),n.jsxs("div",{className:"atw-mt-8 atw-fixed md:atw-relative atw-shadow-above-md md:atw-shadow-none atw-p-4 md:atw-p-0 atw-bg-beige md:atw-bg-transparent atw-bottom-0 atw-left-0 atw-right-0",children:[n.jsx("div",{className:"atw-shadow-xl atw-rounded-sm",children:n.jsx("button",{onClick:s,className:"atw-w-full atw-uppercase atw-bg-red atw-text-white atw-h-12 atw-rounded-sm alma-title-text atw-bg-gradient-to-b atw-from-red atw-via-red atw-to-red-700 atw-outline-none hover:atw-shadow-outline-red focus:atw-shadow-outline-red",children:"J'ai compris"})}),w&&w.length>4&&n.jsx("div",{className:"atw-font-light atw-mt-6",children:"Un crÃ©dit vous engage et doit Ãªtre remboursÃ©. VÃ©rifiez vos capacitÃ©s de remboursement avant de vous engager."})]})]})]})})}function bn(t){var e=t.eligibility,r=t.purchaseAmount;return e.eligible?function(t){var e=t.payment_plan,r=e[1].purchase_amount+e[1].customer_fee+e[1].customer_interest;return n.jsxs("span",{className:"atw-leading-relaxed",children:[n.jsx(un,{cents:e[0].purchase_amount+e[0].customer_fee+e[0].customer_interest})," puisÂ ",e.length-1,"Ã",n.jsx(un,{cents:r})]})}(e):function(t,e){var r=e.constraints.purchase_amount;return e.reasons||!r?n.jsx("span",{children:"Indisponible"}):n.jsxs("span",t<r.minimum?{children:["DÃ¨s ",n.jsx(un,{cents:r.minimum})]}:{children:["Jusqu'Ã  ",n.jsx(un,{cents:r.maximum})]})}(r,e)}var xn=["atw-flex","atw-p-1","atw-text-white","atw-rounded-sm","atw-transition-colors","atw-duration-500","atw-select-none"];function jn(t){var e=t.isActive,r=t.eligibility,a=t.mouseEnterCallback,i=r.eligible;return n.jsx("span",{className:o("atw-inline-block","atw-h-7"),children:n.jsx("span",{className:o("atw-inline-block","atw-transition-all","atw-duration-500","atw-border-b-2",{"atw-border-red":e&&i,"atw-border-opacity-100":e&&i,"atw-border-blue":!e||!i,"atw-border-opacity-50":e&&!i,"atw-border-opacity-0":!e},e?"atw-h-7":"atw-h-6"),children:n.jsxs("span",{className:o.apply(void 0,xn.concat([{"atw-bg-red":e&&i,"atw-bg-blue":!e||!i,"atw-bg-opacity-50":e&&!i,"atw-bg-opacity-25":!e&&!i}])),onMouseEnter:a,children:[r.installments_count,n.jsx(Xe,{className:"plan-pill-multiplier"})]})})})}function Cn(t){var e=t.plan;return n.jsx("span",{className:"atw-animate-pulse atw-h-7",children:n.jsxs("span",{className:o.apply(void 0,xn.concat(["atw-bg-blue","atw-opacity-25","atw-w-full atw-h-6"])),children:[e.installmentsCount,n.jsx(Xe,{className:"plan-pill-multiplier"})]})})}function Nn(t){return t.eligible||void 0===t.reasons}var On=function(t,e){return{key:t,value:e}};function Pn(t){return{shownPlan:0,autoRotate:t.length>0,showTooltip:!1,showInfoModal:!1,modalContent:null}}function Sn(t,e){var n;return Ue({},t,((n={})[e.key]=e.value,n))}function _n(t){return function(){t(On("showTooltip",!0)),t(On("autoRotate",!1))}}function An(t){return function(){t(On("showTooltip",!1)),t(On("autoRotate",!0))}}function kn(t){var e,r,c,s,l=t.almaClient,u=t.purchaseAmount,f=t.queriedPlans,p=t.results,h=t.transitionDelay,d=t.error,m=t.errorRetryCallback,w=p.filter(function(t){return t.eligible}),g=w.length>0,v=i.useReducer(Sn,p,Pn),y=v[0],b=v[1];if(i.useEffect(function(){b(On("autoRotate",p.length>0))},[p]),y.autoRotate&&h&&p.length>1&&i.useEffect(function(){var t=window.setTimeout(r,e);return function(){return clearTimeout(t)}},[e=h,r=function(){b(On("shownPlan",(y.shownPlan+1)%p.length))}]),i.useLayoutEffect(function(){if(y.showInfoModal&&g){var t=document.createElement("div");return t.className="alma-widget-root",document.body.appendChild(t),a.render(n.jsx(yn,{almaClient:l,purchaseAmount:u,installmentsCounts:w.map(function(t){return t.installments_count}),closeCallback:function(){return b(On("showInfoModal",!1))},samplePlans:w.map(function(t){return t.payment_plan})}),t),function(){return document.body.removeChild(t)}}},[y.showInfoModal,g]),0===p.length||d){var x=function(t){var e=t.error,r=t.errorRetryCallback;return{planPills:t.queriedPlans.map(function(t,e){return n.jsx(Cn,{plan:t},e)}),planSummary:e?n.jsxs("span",{children:[n.jsx("span",{className:"atw-text-xs",children:"ERREUR"})," Â ",n.jsx("span",{className:"atw-text-blue atw-underline",onClick:r,children:"rÃ©essayer"})]}):n.jsx("span",{className:"atw-animate-pulse",children:n.jsx("span",{className:"atw-inline-block atw-h-4 atw-bg-blue atw-opacity-25 atw-rounded-sm atw-w-full",children:"Â "})})}}({error:d,queriedPlans:f,errorRetryCallback:m});c=x.planPills,s=x.planSummary}else{var j=y.shownPlan;c=p.filter(Nn).map(function(t,e){return n.jsx(jn,{eligibility:t,isActive:j===e,mouseEnterCallback:function(){return b(On("shownPlan",e))}},e)}),s=n.jsx(bn,{purchaseAmount:u,eligibility:p[j]})}return n.jsxs("div",{onMouseEnter:_n(b),onMouseLeave:An(b),onClick:function(){return!d&&g&&b(On("showInfoModal",!0))},children:[n.jsx("p",{className:o(!d&&y.showTooltip&&g?"atw-opacity-100":"atw-opacity-0","atw-transition-opacity","atw-duration-200","atw-my-1","atw-pl-1","atw-text-xs","atw-font-normal","atw-text-right"),children:"cliquez pour plus d'infos"}),n.jsxs("div",{className:"atw-bg-white atw-cursor-pointer atw-flex atw-flex-row atw-items-center atw-flex-wrap atw-text-xs atw-p-2 atw-pb-0 atw-rounded-md atw-border atw-border-blue atw-border-opacity-50",children:[n.jsx("img",{className:"atw-h-5 atw-mb-2",src:mn,alt:"Alma"}),n.jsx("span",{className:"atw-flex atw-flex-row atw-space-x-1 atw-mx-2 atw-mb-1",children:c}),n.jsx("span",{className:"atw-inline-block atw-mb-2 atw-flex-grow atw-text-sm",children:s})]})]})}var En,Ln,Mn=function(t){function r(e,n){var r;return(r=t.call(this,e,n)||this).results=[],r.loading=!1,r.fetchError=!1,r}Be(r,t);var a=r.prototype;return a.defaultConfig=function(){return{purchaseAmount:100,transitionDelay:5500,plans:[{installmentsCount:3,minAmount:0,maxAmount:2e5},{installmentsCount:4,minAmount:1e4,maxAmount:2e5}],templates:{planSummary:null},classes:{root:"alma-paymentPlans"}}},a.fetchResults=function(){try{for(var t,n,r=this,a=function(){r.results=o.map(function(t){return"number"==typeof t?n[t]:t}).filter(Boolean)},o=[],i=r.config,c=i.purchaseAmount,s=[],l=Ge(i.plans);!(t=l()).done;){var u=t.value;(0==u.minAmount||c>=u.minAmount)&&c<=u.maxAmount?(s.push(u.installmentsCount),o.push(s.length-1)):o.push(new e.Eligibility({eligible:!1,installments_count:u.installmentsCount,constraints:{purchase_amount:{minimum:u.minAmount,maximum:u.maxAmount}}}))}var f=function(t,e){try{var a=Promise.resolve(r.almaClient.payments.eligibility({payment:{purchase_amount:c,installments_count:s}})).then(function(t){n=t})}catch(t){return e(t)}return a&&a.then?a.then(void 0,e):a}(0,function(t){var e;null==(e=console)||null==e.error||e.error(t),r.fetchError=!0,n=[]});return Promise.resolve(f&&f.then?f.then(a):a())}catch(t){return Promise.reject(t)}},a.renderComponent=function(){try{var t=this;t.results.length||t.loading||t.fetchError||(t.loading=!0,t.fetchResults().then(function(){t.loading=!1,t.render()}));var e=t.config;return Promise.resolve(n.jsx(kn,{almaClient:t.almaClient,purchaseAmount:e.purchaseAmount,queriedPlans:e.plans,results:t.results,transitionDelay:e.transitionDelay,error:t.fetchError,errorRetryCallback:function(){t.fetchError=!1,t.render()}}))}catch(t){return Promise.reject(t)}},r}(Ye),Tn=function(t){function e(e,n){var r;return(r=t.call(this,e,n)||this).samplePlans=[],r._show=r.config.show,r}Be(e,t);var r=e.prototype;return r.defaultConfig=function(){return{show:!1,samplePurchaseAmount:3e4,sampleInstallmentsCounts:[3,4],classes:{root:"alma-howItWorks"},templates:{}}},r.open=function(){this.show=!0},r.close=function(){this.show=!1},r.renderComponent=function(){try{return Promise.resolve(this.show?n.jsx(yn,{almaClient:this.almaClient,purchaseAmount:this.config.samplePurchaseAmount,installmentsCounts:this.config.sampleInstallmentsCounts,closeCallback:this.close.bind(this)}):null)}catch(t){return Promise.reject(t)}},qe(e,[{key:"show",get:function(){return this._show},set:function(t){this.show!==t&&(this._show=t,this.render())}}]),e}(Ye);(En=exports.Widgets||(exports.Widgets={})).initialize=function(t,n){var r=e.Client.withMerchantId(t,{mode:n});return new Ze(r)},En.PaymentPlans=Mn,En.HowItWorks=Tn,(Ln=exports.Utils||(exports.Utils={})).priceToCents=function(t){return Math.round(100*t)},Ln.priceFromCents=an,Ln.formatCents=on,Object.defineProperty(exports,"ApiMode",{enumerable:!0,get:function(){return e.ApiMode}});
//# sourceMappingURL=alma-widgets.js.map
